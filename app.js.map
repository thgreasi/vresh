{"version":3,"names":[],"mappings":"","sources":["app.js"],"sourcesContent":["import localforage from 'localforage';\n\nimport { app, loadedPromise } from './appCore';\nimport { init as appThemeInit } from './appTheme';\n\nimport { WeatherService } from './Services/WeatherService';\nimport CityWeatherDetails from './Model/CityWeatherDetails';\n\n\nappThemeInit();\n\n// localforage.config({\n//   name: 'Vresh'\n// });\n\napp.WeatherService = WeatherService;\napp.localforage = localforage;\napp.CityWeatherDetails = CityWeatherDetails;\n\napp.cities = [];\n\n\napp.displayInstalledToast = function() {\n  // Check to make sure caching is actually enabled—it won't be in the dev environment.\n  if (!Polymer.dom(document).querySelector('platinum-sw-cache').disabled) {\n    Polymer.dom(document).querySelector('#caching-complete').show();\n  }\n};\n\napp.displayUpdatedToast = function() {\n  // Check to make sure caching is actually enabled—it won't be in the dev environment.\n  if (!Polymer.dom(document).querySelector('platinum-sw-cache').disabled) {\n    Polymer.dom(document).querySelector('#caching-updated').show();\n  }\n};\n\n// Scroll page to top and expand header\napp.scrollPageToTop = function() {\n  app.$.headerPanelMain.scrollToTop(true);\n};\n\napp.closeDrawer = function() {\n  app.$.paperDrawerPanel.closeDrawer();\n};\n\napp.reloadPage = function() {\n  if (app.crntPageElement && typeof app.crntPageElement.refresh === 'function') {\n    app.crntPageElement.refresh();\n  }\n};\n\napp.dataItemsLoaded = false;\nvar citiesOnLoadPromise = localforage.getItem('data.items').then(items => {\n    if (!Array.isArray(items)) {\n      items = [];\n    }\n\n    items = items.map(repo => Object.assign(new CityWeatherDetails(), repo));\n\n    console.log('LOADED!', items);\n    return items;\n}).catch(() => []);\n\nloadedPromise.then(() => {\n  console.log('loadedPromise');\n  return citiesOnLoadPromise.then(cities => {\n    // app.$.datacitiesStorage.set('autoSaveDisabled', false);\n    app.set('dataItemsLoaded', true);\n    app.set('cities', cities || []);\n    console.log('LOADED & SET cities', cities);\n\n    if (cities && cities.length) {\n      setTimeout(() => {\n        app.route = 'cities';\n        app.reloadPage();\n      }, 0);\n    }\n  });\n\n  // return getUserAndOrgcities('thgreasi');\n\n});\n"],"file":"app.js","sourceRoot":"/source/"}